# ข้อกำหนด (Specification) - สร้างฟังก์ชันการทำงานหลักของ Agent วิจัย

## 1. ภาพรวม (Overview)
Track นี้มีวัตถุประสงค์เพื่อสร้างฟังก์ชันการทำงานหลักของ Agent วิจัยในส่วนหลังของแอปพลิเคชัน Agent นี้จะรับคำถามจากผู้ใช้ ดำเนินการวิจัยบนเว็บแบบวนซ้ำ และให้คำตอบที่สังเคราะห์พร้อมการอ้างอิง

## 2. ขอบเขต (Scope)
*   การรับคำถามจากส่วนหน้า
*   การสร้างคำค้นหาจากคำถามผู้ใช้
*   การใช้ Google Search API เพื่อดึงผลการค้นหา
*   การวิเคราะห์ผลการค้นหาเพื่อระบุช่องว่างความรู้ (Reflection)
*   การปรับปรุงคำค้นหาและทำซ้ำกระบวนการวิจัย (Iterative Refinement)
*   การสังเคราะห์คำตอบสุดท้ายพร้อมการอ้างอิงจากแหล่งที่มา
*   การส่งคำตอบกลับไปยังส่วนหน้า

## 3. ผู้ใช้ (Users)
*   ผู้ใช้ทั่วไปที่ต้องการข้อมูลที่ผ่านการวิจัยและสังเคราะห์มาแล้ว
*   นักพัฒนาที่ต้องการศึกษาการทำงานของ Agent วิจัยที่ใช้ LangGraph และ Gemini

## 4. ข้อกำหนดด้านฟังก์ชันการทำงาน (Functional Requirements)
*   **FR1:** ระบบต้องสามารถรับคำถามของผู้ใช้จากส่วนหน้าได้
*   **FR2:** ระบบต้องสามารถสร้างชุดคำค้นหาที่เกี่ยวข้องจากคำถามของผู้ใช้โดยใช้ Gemini Model
*   **FR3:** ระบบต้องสามารถดำเนินการค้นหาบนเว็บโดยใช้ Google Search API สำหรับแต่ละคำค้นหา
*   **FR4:** ระบบต้องสามารถวิเคราะห์ผลการค้นหาเพื่อระบุว่าข้อมูลเพียงพอหรือไม่ หรือมีช่องว่างความรู้ใดๆ ที่ต้องเติมเต็ม (Reflection)
*   **FR5:** หากข้อมูลไม่เพียงพอหรือมีช่องว่างความรู้ ระบบต้องสามารถสร้างคำค้นหาติดตามผลและทำซ้ำกระบวนการวิจัยได้ (Iterative Refinement)
*   **FR6:** ระบบต้องสามารถจำกัดจำนวนรอบการวิจัยสูงสุด (เช่น 3-5 รอบ)
*   **FR7:** เมื่อการวิจัยเสร็จสิ้น ระบบต้องสามารถสังเคราะห์ข้อมูลที่รวบรวมได้เป็นคำตอบที่กระชับและถูกต้อง
*   **FR8:** คำตอบที่สังเคราะห์ต้องรวมถึงการอ้างอิงที่ชัดเจนจากแหล่งที่มาบนเว็บที่ใช้ในการวิจัย
*   **FR9:** ระบบต้องสามารถส่งคำตอบสุดท้ายพร้อมการอ้างอิงกลับไปยังส่วนหน้าเพื่อแสดงผลได้

## 5. ข้อกำหนดด้านไม่ใช่ฟังก์ชันการทำงาน (Non-Functional Requirements)
*   **NFR1 - ประสิทธิภาพ:** Agent ควรให้คำตอบภายในเวลาที่เหมาะสม (เช่น 30-60 วินาที ขึ้นอยู่กับความซับซ้อนของคำถาม)
*   **NFR2 - ความน่าเชื่อถือ:** Agent ควรให้ข้อมูลที่ถูกต้องและอ้างอิงได้
*   **NFR3 - ความปลอดภัย:** การเรียกใช้ API Key ของ Gemini และ Google Search API จะต้องดำเนินการอย่างปลอดภัย
*   **NFR4 - ความสามารถในการขยาย:** สถาปัตยกรรมของ Agent ควรอนุญาตให้เพิ่มเครื่องมือหรือขั้นตอนการวิจัยเพิ่มเติมได้ในอนาคต

## 6. ข้อจำกัด (Constraints)
*   ต้องใช้ LangGraph สำหรับการจัดการ State และ Logic ของ Agent
*   ต้องใช้ Google Gemini Models สำหรับงาน AI ต่างๆ
*   ต้องใช้ Google Search API สำหรับการเข้าถึงเว็บ

---
